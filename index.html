<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOAL GUIDE</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:#0b0f14;
  color:#fff;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 24px;
  border-bottom:3px solid #f5c400;
}
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:600;
  color:#f5c400;
}
nav button{
  background:none;
  border:none;
  color:#fff;
  margin-left:15px;
  cursor:pointer;
  opacity:.6;
  font-weight:600;
}
nav button.active{
  opacity:1;
  border-bottom:2px solid #f5c400;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:18px;
  padding:24px;
}
.grid h3{
  grid-column:1/-1;
  margin:10px 0 0;
  color:#f5c400;
}

.card{
  background:linear-gradient(145deg,#121a26,#0b0f14);
  border:1px solid #1f2a3a;
  border-radius:14px;
  padding:16px;
}
.league{
  color:#f5c400;
  font-weight:600;
  margin-bottom:8px;
}
.match{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.team{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
}
.team-logo{
  width:22px;
  height:22px;
  object-fit:contain;
}
.date{
  margin-top:10px;
  font-size:13px;
  color:#ccc;
}
footer{
  text-align:center;
  padding:20px;
  color:#666;
}
</style>
</head>

<body>

<header>
  <div class="logo">âš½ GOAL GUIDE</div>
  <nav>
    <button class="active" onclick="showLive()">LIVE</button>
    <button onclick="showFixtures()">FIXTURES</button>
  </nav>
</header>

<div id="grid" class="grid">Loading...</div>

<footer>GOAL GUIDE Â© 2026</footer>

<script>
const grid = document.getElementById("grid");

function setActive(i){
  document.querySelectorAll("nav button")
    .forEach((b,x)=>b.classList.toggle("active", x===i));
}

/* =====================
   LIVE MATCHES
===================== */
async function showLive(){
  setActive(0);
  grid.innerHTML = "Loading live matches...";

  try{
    const r = await fetch("/api/live");
    const json = await r.json();
    const data = json.result || [];

    if(!data.length){
      grid.innerHTML = "No live matches";
      return;
    }

    grid.innerHTML = "<h3>ðŸ”´ Live Matches</h3>";

    data.forEach(m=>{
      const c = document.createElement("div");
      c.className = "card";
      c.innerHTML = `
        <div class="league">${m.league_name || ""}</div>

        <div class="match">
          <div class="team">
            <img class="team-logo" src="${m.home_team_logo || ""}">
            ${m.event_home_team || ""}
          </div>

          <b>${m.event_final_result || "VS"}</b>

          <div class="team">
            <img class="team-logo" src="${m.away_team_logo || ""}">
            ${m.event_away_team || ""}
          </div>
        </div>
      `;
      grid.appendChild(c);
    });

  }catch(e){
    console.error(e);
    grid.innerHTML = "Failed to load live matches";
  }
}

/* =====================
   TODAY FIXTURES
===================== */
async function showFixtures(){
  setActive(1);
  grid.innerHTML = "Loading fixtures...";

  try{
    const r = await fetch("/api/fixtures");
    const json = await r.json();
    const data = json.result || [];

    const TODAY = new Date().toISOString().split("T")[0];
    const todayMatches = data.filter(e => e.event_date === TODAY);

    if(!todayMatches.length){
      grid.innerHTML = "No fixtures today";
      return;
    }

    grid.innerHTML = "<h3>ðŸ“… Today Fixtures</h3>";

    todayMatches.forEach(m=>{
      const c = document.createElement("div");
      c.className = "card";
      c.innerHTML = `
        <div class="league">${m.league_name || ""}</div>

        <div class="match">
          <div class="team">
            <img class="team-logo" src="${m.home_team_logo || ""}">
            ${m.event_home_team || ""}
          </div>

          <b>VS</b>

          <div class="team">
            <img class="team-logo" src="${m.away_team_logo || ""}">
            ${m.event_away_team || ""}
          </div>
        </div>

        <div class="date">${m.event_time || ""}</div>
      `;
      grid.appendChild(c);
    });

  }catch(e){
    console.error(e);
    grid.innerHTML = "Failed to load fixtures";
  }
}

// default
showLive();
</script>

</body>
</html>
