<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOAL GUIDE</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Inter,system-ui,sans-serif;
  background:#0b0f14;
  color:#fff;
}
header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  background:#111827;
}
.logo{font-weight:800;color:#facc15}
.search{
  flex:1;
  background:#151a21;
  border:none;
  border-radius:999px;
  padding:8px 14px;
  color:#fff;
}
.date-bar{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
  padding:10px;
}
.date-bar button{
  background:#151a21;
  border:none;
  color:#fff;
  width:32px;
  height:32px;
  border-radius:50%;
  cursor:pointer;
}
.date-text{font-weight:600}
.tabs{
  display:flex;
  gap:8px;
  padding:10px 12px;
}
.tab{
  background:#151a21;
  border:none;
  padding:6px 14px;
  border-radius:999px;
  color:#9aa4b2;
}
.tab.active{
  background:#facc15;
  color:#000;
  font-weight:700;
}
.league{
  margin:12px;
  background:#151a21;
  border-radius:12px;
  overflow:hidden;
}
.league-header{
  padding:10px 14px;
  font-size:14px;
  font-weight:600;
  background:#1b2230;
}
.match{
  display:grid;
  grid-template-columns:42px 1fr auto 1fr;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  border-top:1px solid #222833;
}
.match:hover{background:#1b2230}
.status{font-size:12px;color:#9aa4b2}
.status.live{color:#ef4444;font-weight:700}
.score{font-weight:700}
.live .score{color:#22c55e}
footer{
  text-align:center;
  padding:20px;
  color:#6b7280;
  font-size:13px;
}
</style>
</head>

<body>

<header>
  <div class="logo">⚽ GOAL GUIDE</div>
  <input class="search" placeholder="Search teams or leagues">
</header>

<div class="date-bar">
  <button onclick="changeDate(-1)">◀</button>
  <span class="date-text" id="dateText">Today</span>
  <button onclick="changeDate(1)">▶</button>
</div>

<div class="tabs">
  <button class="tab active">LIVE</button>
  <button class="tab">TODAY</button>
  <button class="tab">TOMORROW</button>
  <button class="tab">RESULTS</button>
</div>

<!-- API DATA WILL RENDER HERE -->
<div id="matches"></div>

<footer>GOAL GUIDE © 2026</footer>

<script>
const API_BASE = "https://goalguide-api-1.onrender.com";
const matchesEl = document.getElementById("matches");
const dateText = document.getElementById("dateText");

let dayOffset = 0;

/* ---------- DATE ---------- */
function updateDateUI(){
  if(!dateText) return;

  if(dayOffset === 0) dateText.textContent = "Today";
  else if(dayOffset === -1) dateText.textContent = "Yesterday";
  else if(dayOffset === 1) dateText.textContent = "Tomorrow";
  else{
    const d = new Date();
    d.setDate(d.getDate() + dayOffset);
    dateText.textContent = d.toDateString();
  }
}

/* ---------- LOAD MATCHES ---------- */
async function loadMatches(){
  if(!matchesEl) return;

  matchesEl.innerHTML = "<p style='padding:16px'>Loading...</p>";

  try{
    const res = await fetch(`${API_BASE}/api/fixtures?day=${dayOffset}`);
    const data = await res.json();

    // API က array မဟုတ်ရင်
    if(!Array.isArray(data)){
      matchesEl.innerHTML =
        "<p style='padding:16px;color:#ef4444'>Invalid API response</p>";
      return;
    }

    renderMatches(data);

  }catch(err){
    console.error(err);
    matchesEl.innerHTML =
      "<p style='padding:16px;color:#ef4444'>Failed to load data</p>";
  }
}

/* ---------- RENDER MATCHES ---------- */
function renderMatches(matches){
  if(!matches || matches.length === 0){
    matchesEl.innerHTML =
      "<p style='padding:16px;color:#9aa4b2'>No matches</p>";
    return;
  }

  const leagues = {};

  matches.forEach(m=>{
    const leagueName = m.league || "Unknown League";
    if(!leagues[leagueName]) leagues[leagueName] = [];
    leagues[leagueName].push(m);
  });

  let html = "";

  Object.keys(leagues).forEach(league=>{
    html += `
      <section class="league">
        <div class="league-header">${league}</div>
    `;

    leagues[league].forEach(m=>{
      const isLive = m.status === "LIVE";
      const statusText = isLive
        ? `${m.minute ?? ""}'`
        : (m.status || "");

      html += `
        <div class="match ${isLive ? "live" : ""}">
          <span class="status ${isLive ? "live" : ""}">
            ${statusText}
          </span>
          <span>${m.home || "-"}</span>
          <span class="score">
            ${m.homeScore ?? 0} - ${m.awayScore ?? 0}
          </span>
          <span>${m.away || "-"}</span>
        </div>
      `;
    });

    html += `</section>`;
  });

  matchesEl.innerHTML = html;
}

/* ---------- DATE CHANGE ---------- */
function changeDate(step){
  dayOffset += step;
  updateDateUI();
  loadMatches();
}

/* ---------- INIT ---------- */
document.addEventListener("DOMContentLoaded", () => {
  updateDateUI();
  loadMatches();
});
</script>

</body>
</html>
