<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOAL GUIDE</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Inter,system-ui,sans-serif;
  background:#0b0f14;
  color:#fff;
}
header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  background:#111827;
}
.logo{font-weight:800;color:#facc15}
.search{
  flex:1;
  background:#151a21;
  border:none;
  border-radius:999px;
  padding:8px 14px;
  color:#fff;
}
.date-bar{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
  padding:10px;
}
.date-bar button{
  background:#151a21;
  border:none;
  color:#fff;
  width:32px;
  height:32px;
  border-radius:50%;
  cursor:pointer;
}
.date-text{font-weight:600}
.tabs{
  display:flex;
  gap:8px;
  padding:10px 12px;
}
.tab{
  background:#151a21;
  border:none;
  padding:6px 14px;
  border-radius:999px;
  color:#9aa4b2;
  cursor:pointer;
}
.tab.active{
  background:#facc15;
  color:#000;
  font-weight:700;
}
.league{
  margin:12px;
  background:#151a21;
  border-radius:12px;
  overflow:hidden;
}
.league-header{
  padding:10px 14px;
  font-size:14px;
  font-weight:600;
  background:#1b2230;
  display:flex;
  align-items:center;
  gap:8px;
}
.league-header img{
  width:18px;
  height:18px;
}
.match{
  display:grid;
  grid-template-columns:42px 1fr auto 1fr;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  border-top:1px solid #222833;
  cursor:pointer;
}
.match:hover{background:#1b2230}
.status{font-size:12px;color:#9aa4b2}
.status.live{color:#ef4444;font-weight:700}
.score{font-weight:700}
.live .score{color:#22c55e}
.team{
  display:flex;
  align-items:center;
  gap:6px;
}
.team img{
  width:18px;
  height:18px;
}
footer{
  text-align:center;
  padding:20px;
  color:#6b7280;
  font-size:13px;
}
</style>
</head>

<body>

<header>
  <div class="logo">⚽ GOAL GUIDE</div>
  <input class="search" placeholder="Search teams or leagues">
</header>

<div class="date-bar">
  <button onclick="changeDate(-1)">◀</button>
  <span class="date-text" id="dateText">Today</span>
  <button onclick="changeDate(1)">▶</button>
</div>

<div class="tabs">
  <button class="tab active" data-tab="LIVE">LIVE</button>
  <button class="tab" data-tab="TODAY">TODAY</button>
  <button class="tab" data-tab="TOMORROW">TOMORROW</button>
</div>

<div id="matches"></div>

<footer>GOAL GUIDE © 2026</footer>

<script>
const API_BASE = "https://goalguide-api-1.onrender.com";
const matchesEl = document.getElementById("matches");
const dateText = document.getElementById("dateText");
const tabs = document.querySelectorAll(".tab");

let dayOffset = 0;
let currentTab = "LIVE";

/* ---------- TAB ---------- */
tabs.forEach(tab=>{
  tab.addEventListener("click",()=>{
    tabs.forEach(t=>t.classList.remove("active"));
    tab.classList.add("active");
    currentTab = tab.dataset.tab;

    if(currentTab === "TODAY") dayOffset = 0;
    if(currentTab === "TOMORROW") dayOffset = 1;

    updateDateUI();
    loadMatches();
  });
});

/* ---------- DATE ---------- */
function updateDateUI(){
  if(dayOffset === 0) dateText.textContent = "Today";
  else if(dayOffset === 1) dateText.textContent = "Tomorrow";
  else if(dayOffset === -1) dateText.textContent = "Yesterday";
}

/* ---------- LOAD ---------- */
async function loadMatches(){
  matchesEl.innerHTML = "<p style='padding:16px'>Loading...</p>";

  try{
    const res = await fetch(`${API_BASE}/api/fixtures?day=${dayOffset}`);
    let data = await res.json();

    if(currentTab === "LIVE"){
      data = data.filter(m => m.status === "LIVE");
    }

    renderMatches(data);

  }catch(e){
    matchesEl.innerHTML = "<p style='padding:16px;color:red'>Error</p>";
  }
}

/* ---------- RENDER ---------- */
function renderMatches(matches){
  if(!matches.length){
    matchesEl.innerHTML =
      "<p style='padding:16px;color:#9aa4b2'>No matches</p>";
    return;
  }

  const leagues = {};
  matches.forEach(m=>{
    if(!leagues[m.league]) leagues[m.league] = [];
    leagues[m.league].push(m);
  });

  let html = "";

  Object.keys(leagues).forEach(league=>{
    const lg = leagues[league][0];

    html += `
      <section class="league">
        <div class="league-header">
          ${lg.leagueLogo ? `<img src="${lg.leagueLogo}">` : ""}
          ${league}
        </div>
    `;

    leagues[league].forEach(m=>{
      const isLive = m.status === "LIVE";
      html += `
        <div class="match ${isLive?"live":""}"
          onclick="openMatch('${m.id}')">
          <span class="status ${isLive?"live":""}">
            ${isLive ? m.minute+"'" : m.status}
          </span>

          <div class="team">
            ${m.homeLogo ? `<img src="${m.homeLogo}">` : ""}
            ${m.home}
          </div>

          <span class="score">${m.homeScore} - ${m.awayScore}</span>

          <div class="team">
            ${m.awayLogo ? `<img src="${m.awayLogo}">` : ""}
            ${m.away}
          </div>
        </div>
      `;
    });

    html += "</section>";
  });

  matchesEl.innerHTML = html;
}

/* ---------- MATCH CLICK ---------- */
function openMatch(id){
  window.location.href = `match.html?id=${id}`;
}

/* ---------- INIT ---------- */
updateDateUI();
loadMatches();
</script>

</body>
</html>
