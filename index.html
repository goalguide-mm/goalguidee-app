<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOAL GUIDE | Pro Scores</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
    /* FotMob Style CSS */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,sans-serif;background:#0b0f14;color:#fff;}
    header{padding:16px;background:#111827;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;}
    .logo{font-weight:800;color:#facc15;font-size:20px;}
    .date-bar{display:flex;justify-content:center;align-items:center;gap:10px;padding:15px;}
    .date-bar button, .date-bar input{background:#1f2937;border:none;color:#fff;padding:8px 12px;border-radius:8px;font-weight:600;}
    .tabs{display:flex;gap:8px;padding:0 16px 12px;}
    .tab{background:#151a21;border:1px solid #30363d;padding:8px 20px;border-radius:999px;color:#9aa4b2;cursor:pointer;font-weight:600;}
    .tab.active{background:#facc15;color:#000;border-color:#facc15;}
    .league{margin:0 12px 16px;background:#151a21;border-radius:12px;border:1px solid #30363d;overflow:hidden;}
    .league-header{padding:10px 14px;font-size:12px;font-weight:700;background:#1b2230;color:#8b949e;display:flex;align-items:center;gap:8px;}
    .league-header img{width:18px;height:18px;}
    .match{display:grid;grid-template-columns:60px 1fr 60px 1fr;align-items:center;padding:16px 14px;border-top:1px solid #222833;}
    .team{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center;}
    .team img{width:30px;height:30px;object-fit:contain;}
    .score-box{font-size:18px;font-weight:800;text-align:center;color:#facc15;}
    .time-status{font-size:11px;color:#9aa4b2;font-weight:600;text-align:center;}
    .live-tag{color:#ef4444;animation:blink 1.5s infinite;}
    @keyframes blink { 0%, 100% {opacity:1} 50% {opacity:0.4} }
</style>
</head>
<body>

<header><div class="logo">⚽ GOAL GUIDE</div></header>

<div class="date-bar">
    <button onclick="changeDate(-1)">◀</button>
    <input type="date" id="matchDate" onchange="handleDateChange(this.value)">
    <button onclick="changeDate(1)">▶</button>
</div>

<div class="tabs">
    <button class="tab active" onclick="setTab('LIVE', this)">LIVE</button>
    <button class="tab" onclick="setTab('FIXTURES', this)">MATCHES</button>
</div>

<div id="matches"></div>

<script>
    const API_BASE = "https://goalguide-api-1.onrender.com";
    const matchesEl = document.getElementById("matches");
    const dateInput = document.getElementById("matchDate");
    let currentTab = "LIVE";
    let selectedDate = new Date().toISOString().split('T')[0];

    dateInput.value = selectedDate;

    function setTab(tab, el) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        currentTab = tab;
        loadMatches();
    }

    function handleDateChange(date) { selectedDate = date; loadMatches(); }
    function changeDate(n) {
        let d = new Date(selectedDate);
        d.setDate(d.getDate() + n);
        selectedDate = d.toISOString().split('T')[0];
        dateInput.value = selectedDate;
        loadMatches();
    }

    async function loadMatches() {
        matchesEl.innerHTML = "<p style='text-align:center;padding:40px;'>Loading...</p>";
        const url = (currentTab === "LIVE") ? `${API_BASE}/api/live` : `${API_BASE}/api/fixtures/date/${selectedDate}`;
        try {
            const res = await fetch(url);
            const data = await res.json();
            renderMatches(data);
        } catch (e) { matchesEl.innerHTML = "<p style='text-align:center;color:red;'>Error Loading Data</p>"; }
    }

    function renderMatches(data) {
        if (!data.length) { matchesEl.innerHTML = "<p style='text-align:center;padding:40px;'>No Matches Found</p>"; return; }
        let html = "";
        data.forEach(m => {
            const status = m.fixture.status.short;
            const isLive = ["1H", "2H", "HT", "ET", "P"].includes(status);
            const score = (status === "NS") ? "vs" : `${m.goals.home} - ${m.goals.away}`;
            
            html += `
            <div class="league">
                <div class="league-header">
                    <img src="${m.league.logo}"> ${m.league.name}
                </div>
                <div class="match">
                    <div class="time-status">
                        ${isLive ? `<span class="live-tag">${m.fixture.status.elapsed}'</span>` : m.fixture.status.short}
                    </div>
                    <div class="team">
                        <img src="${m.teams.home.logo}"> <span>${m.teams.home.name}</span>
                    </div>
                    <div class="score-box">${score}</div>
                    <div class="team">
                        <img src="${m.teams.away.logo}"> <span>${m.teams.away.name}</span>
                    </div>
                </div>
            </div>`;
        });
        matchesEl.innerHTML = html;
    }
    loadMatches();
</script>
</body>
</html>
