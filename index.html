<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOAL GUIDE</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:Inter,sans-serif;background:#0b0f14;color:#fff;}
  header{display:flex;align-items:center;padding:12px 16px;background:#111827;position:sticky;top:0;z-index:1000;gap:12px;border-bottom:1px solid #1f2937;}
  .logo-img{width:40px;height:40px;border-radius:8px;}
  .logo-text{font-weight:800;color:#facc15;font-size:20px;}

  .nav-tabs{display:flex;background:#111827;padding:0 16px;gap:20px;position:sticky;top:64px;z-index:999;border-bottom:1px solid #1f2937;overflow-x:auto;}
  .tab-btn{padding:14px 0;background:none;border:none;color:#8b949e;font-weight:700;font-size:13px;cursor:pointer;position:relative;text-transform:uppercase;white-space:nowrap;}
  .tab-btn.active{color:#facc15;}
  .tab-btn.active::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:3px;background:#facc15;}

  .content-section{display:none;}
  .content-section.active{display:block;}

  /* --- Matches Section (Outer Golden Border Added) --- */
  .date-bar{display:flex;justify-content:center;align-items:center;gap:10px;padding:15px;}
  .date-bar button, .date-bar input{background:#1f2937;border:none;color:#fff;padding:8px;border-radius:8px;}
  
  /* League Card Outer Golden Border */
  .league-card{
    margin:12px;
    background:#151a21;
    border-radius:12px;
    border: 2px solid #facc15; /* အပြင်ဘောင်ကို ရွှေရောင်ကွတ်လိုက်သည် */
    overflow:hidden;
    box-shadow: 0 4px 15px rgba(250, 204, 21, 0.1);
  }
  .league-header{padding:10px 14px;font-size:12px;font-weight:700;background:#1b2230;color:#8b949e;display:flex;align-items:center;gap:10px;}
  .league-header img{width:20px;height:20px;}

  .match {
    display:grid;
    grid-template-columns:85px 1fr 65px 1fr;
    align-items:center;
    padding:16px 14px;
    border-top:1px solid #30363d;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    background: #151a21;
  }

  /* Hover Effect on Match Rows */
  .match:hover {
    transform: scale(1.01);
    background: #1c232d;
    z-index: 10;
  }

  .time-status{font-size:11px;font-weight:800;color:#8b949e;}
  .status-pp{color:#ef4444;}
  .status-live{color:#ef4444;animation:blink 1.5s infinite;}
  @keyframes blink{0%{opacity:1}50%{opacity:0.4}100%{opacity:1}}
  .team-row{display:flex;flex-direction:column;align-items:center;gap:6px;}
  .team-row img{width:30px;height:30px;object-fit:contain;background:#fff;border-radius:4px;padding:2px;}
  .score-box{font-size:18px;font-weight:800;text-align:center;color:#facc15;}

  /* --- Highlights Style (No Changes) --- */
  .grid-layout{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:20px;padding:16px;}
  .video-card {
    background: #151a21;
    border-radius: 12px;
    overflow: hidden;
    border: 2px solid #30363d;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    position: relative;
  }
  .video-card:hover {
    transform: translateY(-10px) scale(1.02);
    border-color: #facc15;
    box-shadow: 0 10px 30px rgba(250, 204, 21, 0.2);
  }
  .video-card img{width:100%;aspect-ratio:16/9;object-fit:cover;display:block;}
  .video-card .title-box {padding:12px; font-weight:600; font-size:13px; color:#fff;}

  /* Modal Style */
  .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);align-items:center;justify-content:center;z-index:2000;}
  .modal-content{width:95%;max-width:900px;position:relative;background:#000;border-radius:15px;overflow:hidden;}
  .close-modal{position:absolute;top:10px;right:15px;color:#fff;font-size:35px;cursor:pointer;z-index:2001;}

  footer{text-align:center;padding:30px;color:#6b7280;font-size:11px;}
</style>
</head>
<body>

<header>
  <img src="IMG_20260123_104505_958.jpg" class="logo-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/53/53283.png'">
  <div class="logo-text">GOAL GUIDE</div>
</header>

<nav class="nav-tabs">
  <button id="tab-matches" class="tab-btn active" onclick="switchTab('matches')">Matches</button>
  <button id="tab-live" class="tab-btn" onclick="switchTab('live')">Live Streaming</button>
  <button id="tab-standings" class="tab-btn" onclick="switchTab('standings')">Standings</button>
  <button id="tab-highlights" class="tab-btn" onclick="switchTab('highlights')">Highlights</button>
</nav>

<div id="section-matches" class="content-section active">
  <div class="date-bar">
    <button onclick="changeDate(-1)">◀</button>
    <input type="date" id="matchDate" onchange="handleDateChange(this.value)">
    <button onclick="changeDate(1)">▶</button>
  </div>
  <div id="matches-list"></div>
</div>

<div id="section-live" class="content-section">
  <div id="live-list" class="grid-layout"></div>
</div>

<div id="section-standings" class="content-section">
  <div id="standings-list"></div>
</div>

<div id="section-highlights" class="content-section">
  <div id="highlights-list" class="grid-layout"></div>
</div>

<div id="mainModal" class="modal" onclick="closeModal()">
  <span class="close-modal" onclick="closeModal()">&times;</span>
  <div class="modal-content" onclick="event.stopPropagation()">
    <div id="modalBody"></div>
  </div>
</div>

<footer>GOAL GUIDE © 2026</footer>

<script>
const API_BASE = "https://goalguide-api-1.onrender.com";
let selectedDate = new Date().toLocaleDateString('en-CA');
document.getElementById("matchDate").value = selectedDate;

function switchTab(tab) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
  document.getElementById('tab-' + tab).classList.add('active');
  document.getElementById('section-' + tab).classList.add('active');
  if(tab === 'matches') loadMatches();
  if(tab === 'live') loadLive();
  if(tab === 'standings') loadStandings();
  if(tab === 'highlights') loadHighlights();
}

async function loadMatches() {
  const list = document.getElementById("matches-list");
  list.innerHTML = "<p style='text-align:center;padding:40px;'>Loading...</p>";
  try {
    const res = await fetch(`${API_BASE}/api/fixtures/date/${selectedDate}`);
    const data = await res.json();
    let html = "";
    const grouped = data.reduce((acc, m) => {
      const l = m.league?.name || "Other";
      if(!acc[l]) acc[l] = {logo: m.league?.image_path, matches: []};
      acc[l].matches.push(m);
      return acc;
    }, {});
    for(let l in grouped){
      html += `<div class="league-card"><div class="league-header"><img src="${grouped[l].logo}">${l}</div>`;
      grouped[l].matches.forEach(m => {
        let state = m.state?.state;
        let time = new Date(m.starting_at).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
        let status = `<span>${time}</span>`;
        if(["INPLAY","HT"].includes(state)) status = `<span class="status-live">● LIVE ${m.state?.minute}'</span>`;
        if(state === "FT") status = "<span>FT</span>";
        if(["PP","POSTPONED"].includes(state)) status = "<span class='status-pp'>PP</span>";
        html += `<div class="match">
          <div class="time-status">${status}</div>
          <div class="team-row"><img src="${m.participants[0].image_path}"><span>${m.participants[0].name}</span></div>
          <div class="score-box">${state==="NS"?"vs":(m.scores[0].score.goals+"-"+m.scores[1].score.goals)}</div>
          <div class="team-row"><img src="${m.participants[1].image_path}"><span>${m.participants[1].name}</span></div>
        </div>`;
      });
      html += `</div>`;
    }
    list.innerHTML = html || "<p style='text-align:center;padding:40px;'>No Matches</p>";
  } catch(e) { list.innerHTML = "Error"; }
}

async function loadStandings() {
  const list = document.getElementById("standings-list");
  try {
    const res = await fetch(`${API_BASE}/api/standings`);
    const data = await res.json();
    list.innerHTML = data.map(l => `
      <div class="league-card">
        <div class="league-header">${l.name}</div>
        <div style="overflow-x:auto;"><table>
          <tr><th>#</th><th>Team</th><th>PL</th><th>PTS</th></tr>
          ${l.standings.map(s => `<tr><td>${s.position}</td><td>${s.team_name}</td><td>${s.played}</td><td style="color:#facc15">${s.pts}</td></tr>`).join('')}
        </table></div>
      </div>`).join('');
  } catch(e) { list.innerHTML = "Unavailable"; }
}

async function loadLive() {
  const list = document.getElementById("live-list");
  try {
    const res = await fetch(`${API_BASE}/api/live-streams`);
    const data = await res.json();
    list.innerHTML = data.map(s => `<div class="video-card" onclick="openVideo('${s.embedUrl}')"><div style="padding:20px;text-align:center;color:#ef4444;font-weight:800;">LIVE</div><div style="padding:10px;text-align:center;">${s.homeTeam} vs ${s.awayTeam}</div></div>`).join('');
  } catch(e) { list.innerHTML = "<p style='grid-column:1/-1;text-align:center;'>No Live Matches</p>"; }
}

async function loadHighlights() {
  const list = document.getElementById("highlights-list");
  try {
    const res = await fetch(`${API_BASE}/api/highlights`);
    const data = await res.json();
    list.innerHTML = data.map(h => `<div class="video-card" onclick="openVideo('${h.matchviewUrl}')"><img src="${h.thumbnail}"><div class="title-box">${h.title}</div></div>`).join('');
  } catch(e) { list.innerHTML = "Error"; }
}

function openVideo(url) {
  document.getElementById("mainModal").style.display = "flex";
  document.getElementById("modalBody").innerHTML = `<iframe src="${url}" style="width:100%;aspect-ratio:16/9;border:none;" allowfullscreen></iframe>`;
}

function closeModal() { document.getElementById("mainModal").style.display = "none"; document.getElementById("modalBody").innerHTML = ""; }
function handleDateChange(v) { selectedDate = v; loadMatches(); }
function changeDate(n) { let d = new Date(selectedDate); d.setDate(d.getDate()+n); selectedDate = d.toLocaleDateString('en-CA'); document.getElementById("matchDate").value = selectedDate; loadMatches(); }

loadMatches();
</script>
</body>
</html>
